TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`localhost` TRIGGER `mysql_test`.`user_room_BEFORE_UPDATE` BEFORE UPDATE ON `user_room` FOR EACH ROW\nBEGIN\n	UPDATE roomresultinfo SET RoomResult_AgreeCnt=(RoomResult_AgreeCnt-1) WHERE OLD.Room_Number!=0 AND OLD.bAgree!=NEW.bAgree AND OLD.bAgree=1 AND OLD.Room_Number=Room_Number;\n	UPDATE roomresultinfo SET RoomResult_DisagreeCnt=(RoomResult_DisagreeCnt-1) WHERE OLD.Room_Number!=0 AND OLD.bAgree!=NEW.bAgree AND OLD.bAgree=2 AND OLD.Room_Number=Room_Number;\n	UPDATE roomresultinfo SET RoomResult_NullityCnt=(RoomResult_NullityCnt-1) WHERE OLD.Room_Number!=0 AND OLD.bAgree!=NEW.bAgree AND OLD.bAgree=0 AND OLD.Room_Number=Room_Number;\n    \n	UPDATE roominfo SET Room_CurMemberCount=(Room_CurMemberCount-1) WHERE Room_Number=OLD.Room_Number AND OLD.Room_Number!=NEW.Room_Number;\n    DELETE FROM roominfo WHERE Room_Number=OLD.Room_Number AND Room_CurMemberCount<1 AND Room_Number!=0;\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `mysql_test`.`user_room_AFTER_UPDATE` AFTER UPDATE ON `user_room` FOR EACH ROW\nBEGIN    \n	UPDATE roomresultinfo SET RoomResult_AgreeCnt=(RoomResult_AgreeCnt+1) WHERE OLD.Room_Number!=0 AND OLD.bAgree!=NEW.bAgree AND NEW.bAgree=1 AND OLD.Room_Number=Room_Number;\n	UPDATE roomresultinfo SET RoomResult_DisagreeCnt=(RoomResult_DisagreeCnt+1) WHERE OLD.Room_Number!=0 AND OLD.bAgree!=NEW.bAgree AND NEW.bAgree=2 AND OLD.Room_Number=Room_Number;\n	UPDATE roomresultinfo SET RoomResult_NullityCnt=(RoomResult_NullityCnt+1) WHERE OLD.Room_Number!=0 AND OLD.bAgree!=NEW.bAgree AND NEW.bAgree=0 AND OLD.Room_Number=Room_Number;\n    \n	UPDATE userinfo SET User_TotalPart=(User_TotalPart+1) WHERE User_Id=OLD.User_Id AND NEW.Room_Number=0 AND OLD.Room_Number!=0 AND 1=(SELECT Room_State FROM roominfo WHERE Room_Number=OLD.Room_Number);\n    \n	UPDATE roominfo SET Room_CurMemberCount=(Room_CurMemberCount+1) WHERE Room_Number=NEW.Room_Number AND OLD.Room_Number!=NEW.Room_Number;\nEND'
sql_modes=1344274432 1344274432
definers='root@localhost' 'root@localhost'
client_cs_names='utf8' 'utf8'
connection_cl_names='utf8_general_ci' 'utf8_general_ci'
db_cl_names='dec8_swedish_ci' 'dec8_swedish_ci'
created=148240435704 148240918953
